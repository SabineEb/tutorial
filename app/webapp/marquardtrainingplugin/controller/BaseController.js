sap.ui.define(["sap/dm/dme/podfoundation/controller/PluginViewController","sap/ui/model/json/JSONModel","com/systemagmbh/marquardtrainingplugin/builder/localPodConfigs","com/systemagmbh/marquardtrainingplugin/data/localPodSelectionModelData"],function(e,t,o,n){"use strict";let r;return e.extend("com.systemagmbh.marquardtrainingplugin.controller.BaseController",{onInit:function(){e.prototype.onInit.apply(this,arguments);r=this;this.ownerComponent=this._getPodController().getOwnerComponent();this.eventBus=this.ownerComponent.getEventBus();if(!this.getPodController()){this.zPodSelectionModel=new t(n);this.ownerComponent.setModel(this.zPodSelectionModel,"zPodSelectionModel")}else{this.zPodSelectionModel=this.ownerComponent.getModel("zPodSelectionModel")}},setCSSFile:function(e){$("head").append(`<link rel="stylesheet" href=${e}>`)},getJsonFile:function(e){return new Promise(t=>{$.get(e,t)})},_getConfiguration:function(){if(this.getPodController()){return this.getConfiguration()}else{return o}},_getPodController:function(){if(this.getPodController()){return this.getPodController()}return this},getPlant:function(){if(this.getPodController()){return this.getPodController().getUserPlant()}else{return this.zPodSelectionModel.getProperty("/loginData/plant")}},getUser:function(){if(this.getPodController()){return this.getUserId()}else{return this.zPodSelectionModel.getProperty("/loginData/userId")}},getWorkCenter:function(){return this.zPodSelectionModel.getProperty("/loginData/workcenter")},getResource:function(){if(this.getPodSelectionModel()&&this.getPodSelectionModel().resource!=undefined){return this.getPodSelectionModel().resource.resource}else{return this.zPodSelectionModel.getProperty("/loginData/resource")}},getSfc:function(){if(this.getPodSelectionModel()&&this.getPodSelectionModel().getSelection().input!=undefined){return this.getPodSelectionModel().getSelection().input}else{return this.zPodSelectionModel.getProperty("/loginData/sfc")}},getOrder:function(){if(this.getPodSelectionModel()&&this.getPodSelectionModel().getSelection().shopOrder!=undefined){return this.getPodSelectionModel().getSelection().shopOrder.shopOrder}else{return this.zPodSelectionModel.getProperty("/loginData/shopOrder")}},getMaterial:function(){if(this.getPodSelectionModel()&&this.getPodSelectionModel().getSelection().item!=undefined){return this.getPodSelectionModel().getSelection().item.item}else{return this.zPodSelectionModel.getProperty("/loginData/material")}},get:function(e,t){return new Promise((o,n)=>{if(this.getPodController()){this.getPodController()._oPodController.ajaxGetRequest(r.getApiUrl(e),t,function(e){o(e)},function(e,t){var o=e||t;console.log(o);n(o)})}else{$.ajax({url:r.getApiUrl(e),method:"GET",headers:{"X-Dme-Plant":r.getPlant()},data:t,success:o,error:n})}})},getoData:function(e,t){return new Promise((o,n)=>{if(this.getPodController()){this.getPodController()._oPodController.ajaxGetRequest(r.getoDataUrl(e),t,o,n)}else{$.ajax({url:r.getoDataUrl(e),method:"GET",headers:{"X-Dme-Plant":r.getPlant()},data:t,success:o,error:n})}})},post:function(e,t,o={},n={}){return new Promise((l,i)=>{let s=Object.keys(n).length>0?"?"+$.param(n):"";if(this.getPodController()){this.getPodController()._oPodController.ajaxPostRequest(r.getApiUrl(e)+s,t,function(e){l(e)},function(e,t){var o=e||t;console.log(o);i(o)})}else{$.ajax({url:r.getApiUrl(e)+s,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t),headers:{"X-Dme-Plant":r.getPlant(),...o},success:l,error:e=>{i(e&&e.responseJSON||e)}})}})},patch:function(e,t,o={},n={}){return new Promise((l,i)=>{let s="?"+$.param(n);if(this.getPodController()){this.getPodController()._oPodController.ajaxPatchRequest(r.getApiUrl(e)+s,t,function(e){l(e)},function(e,t){var o=e||t;console.log(o);i(o)})}else{$.ajax({url:r.getApiUrl(e),method:"PATCH",contentType:"application/json",data:JSON.stringify(t),headers:{"X-Dme-Plant":r.getPlant(),...o},success:l,error:e=>{i(e&&e.responseJSON||e)}})}})},postoData:function(e,t,o={},n={}){return new Promise((l,i)=>{let s="?"+$.param(n);if(this.getPodController()){this.getPodController()._oPodController.ajaxPostRequest(e+s,t,function(e){l(e)},function(e,t){var o=e||t;console.log(o);i(o)})}else{$.ajax({url:r.getoDataUrl(e)+s,method:"POST",contentType:"application/json",data:JSON.stringify(t),headers:{"X-Dme-Plant":r.getPlant(),...o},success:l,error:i})}})},put:function(e,t,o={},n={}){return new Promise((l,i)=>{let s="?"+$.param(n);if(this.getPodController()){this.getPodController()._oPodController.ajaxPutRequest(r.getApiUrl(e)+s,t,function(e){l(e)},function(e,t){var o=e||t;console.log(o);i(o)})}else{$.ajax({url:r.getApiUrl(e)+s,method:"PUT",contentType:"application/json",headers:{"X-Dme-Plant":r.getPlant(),...o},data:JSON.stringify(t),success:l,error:e=>{i(e&&e.responseJSON||e)}})}})},putoData:function(e,t,o={},n={}){return new Promise((l,i)=>{let s="?"+$.param(n);if(this.getPodController()){this.getPodController()._oPodController.ajaxPutRequest(e+s,t,function(e){l(e)},function(e,t){var o=e||t;console.log(o);i(o)})}else{$.ajax({url:r.getoDataUrl(e)+s,method:"PUT",contentType:"application/json",headers:{"X-Dme-Plant":r.getPlant(),...o},data:JSON.stringify(t),success:l,error:i})}})},getApiUrl:function(e){if(!this.getPublicApiRestDataSourceUri()){return"/api/"+e}return this.getPublicApiRestDataSourceUri()+e},getoDataUrl:function(e){if(!this.getPodController()){return"/oData"+e}return e},getCurrentTime:function(){return moment().format("YYYY-MM-DDTHH:mm:ss.SSSZ")},getTranslatedText:function(e,t=[]){return this.getView().getModel("i18n").getResourceBundle().getText(e,t)}})});
//# sourceMappingURL=BaseController.js.map